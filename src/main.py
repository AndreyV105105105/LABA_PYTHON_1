from src.calculator import calc


def run():
    """
    Основная функция запуска калькулятора.
    Обеспечивает интерактивный режим работы с пользователем.
    """
    print("ПРИВЕТ ДАВАЙ НАЧНЁМ РАБОТАТЬ!")
    print("У МЕНЯ ЕСТЬ ТАКИЕ ОПЕРАЦИИ: +, -, *, /, //, %, **, ()")
    print("ПРИМЕРЫ ЗАПИСИ: 1+2*3, 5//2, (5+2)**2, -5+2, 9-(-99)")
    print("НЕЛЬЗЯ писать ДВЕ И БОЛЕЕ операции подряд, например: 5--5, 5*-2")
    print("УНАРНЫЕ ЗНАКИ ПИСАТЬ ОБЯЗАТЕЛЬНО В СКОБКАХ: 1+(-2)")
    print('ЧТОБЫ выйти из программы, НАПИШИ "exit"')

    while True:
        try:
            # Получаем выражение от пользователя
            expression = input("Введите ваше выражение:").strip()

            # Проверка на выход из программы
            if expression.lower() == "exit":
                print("ПАКА")
                break

            # Пропускаем пустые вводы
            if not expression:
                continue

            # Вычисляем результат
            result = calc(expression)
            print(f"Результат: {result}")

        except ValueError as e:
            # Обработка ошибок валидации
            print(f"Ошибка: {e}")
        except KeyboardInterrupt:
            # Обработка прерывания (Ctrl+C)
            print("\nПАКА!")
            break
        except Exception as e:
            # Обработка неожиданных ошибок
            print(f"Прикол: {e}")


if __name__ == "__main__":
    # Точка входа в программу
    run()
